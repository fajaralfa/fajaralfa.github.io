const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CAg_4wFJ.js","./DMJsFjaX.js"])))=>i.map(i=>d[i]);
import{V as O,W as g,r as C,X as j,Y as B,h as I,Z as N,$ as W,a0 as R,b as L,n as x,a1 as q,a2 as M,a3 as U,a4 as H,_ as F}from"./DMJsFjaX.js";function V(r){return{type:"root",children:r.value.map(P)}}function P(r){if(typeof r=="string")return{type:"text",value:r};const[s,t,...a]=r;return{type:"element",tag:s,props:t,children:a.map(P)}}const A=r=>r==="defer"||r===!1;function re(...r){var v;const s=typeof r[r.length-1]=="string"?r.pop():void 0;typeof r[0]!="string"&&r.unshift(s);let[t,a,n={}]=r;if(typeof t!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof a!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const e=O(),i=a,c=()=>g.value,f=()=>e.isHydrating?e.payload.data[t]:e.static.data[t];n.server=n.server??!0,n.default=n.default??c,n.getCachedData=n.getCachedData??f,n.lazy=n.lazy??!1,n.immediate=n.immediate??!0,n.deep=n.deep??g.deep,n.dedupe=n.dedupe??"cancel";const y=n.getCachedData(t,e),_=y!=null;if(!e._asyncData[t]||!n.immediate){(v=e.payload._errors)[t]??(v[t]=g.errorValue);const u=n.deep?C:j;e._asyncData[t]={data:u(_?y:n.default()),pending:C(!_),error:B(e.payload._errors,t),status:C("idle"),_default:n.default}}const o={...e._asyncData[t]};delete o._default,o.refresh=o.execute=(u={})=>{if(e._asyncDataPromises[t]){if(A(u.dedupe??n.dedupe))return e._asyncDataPromises[t];e._asyncDataPromises[t].cancelled=!0}if(u._initial||e.isHydrating&&u._initial!==!1){const h=u._initial?y:n.getCachedData(t,e);if(h!=null)return Promise.resolve(h)}o.pending.value=!0,o.status.value="pending";const p=new Promise((h,l)=>{try{h(i(e))}catch(w){l(w)}}).then(async h=>{if(p.cancelled)return e._asyncDataPromises[t];let l=h;n.transform&&(l=await n.transform(h)),n.pick&&(l=G(l,n.pick)),e.payload.data[t]=l,o.data.value=l,o.error.value=g.errorValue,o.status.value="success"}).catch(h=>{if(p.cancelled)return e._asyncDataPromises[t];o.error.value=R(h),o.data.value=L(n.default()),o.status.value="error"}).finally(()=>{p.cancelled||(o.pending.value=!1,delete e._asyncDataPromises[t])});return e._asyncDataPromises[t]=p,e._asyncDataPromises[t]},o.clear=()=>Q(e,t);const m=()=>o.refresh({_initial:!0}),D=n.server!==!1&&e.payload.serverRendered;{const u=x();if(u&&D&&n.immediate&&!u.sp&&(u.sp=[]),u&&!u._nuxtOnBeforeMountCbs){u._nuxtOnBeforeMountCbs=[];const l=u._nuxtOnBeforeMountCbs;q(()=>{l.forEach(w=>{w()}),l.splice(0,l.length)}),M(()=>l.splice(0,l.length))}D&&e.isHydrating&&(o.error.value||y!=null)?(o.pending.value=!1,o.status.value=o.error.value?"error":"success"):u&&(e.payload.serverRendered&&e.isHydrating||n.lazy)&&n.immediate?u._nuxtOnBeforeMountCbs.push(m):n.immediate&&m();const p=W();if(n.watch){const l=I(n.watch,()=>o.refresh());p&&N(l)}const h=e.hook("app:data:refresh",async l=>{(!l||l.includes(t))&&await o.refresh()});p&&N(h)}const d=Promise.resolve(e._asyncDataPromises[t]).then(()=>o);return Object.assign(d,o),d}function Q(r,s){s in r.payload.data&&(r.payload.data[s]=void 0),s in r.payload._errors&&(r.payload._errors[s]=g.errorValue),r._asyncData[s]&&(r._asyncData[s].data.value=void 0,r._asyncData[s].error.value=g.errorValue,r._asyncData[s].pending.value=!1,r._asyncData[s].status.value="idle"),s in r._asyncDataPromises&&(r._asyncDataPromises[s]&&(r._asyncDataPromises[s].cancelled=!0),r._asyncDataPromises[s]=void 0)}function G(r,s){const t={};for(const a of s)t[a]=r[a];return t}const ae={post:"v3.2.0--AtqGn1d6uI",page:"v3.2.0--Z0vcEExgRW"},K={post:"_content_post",page:"_content_page",info:"_content_info"},se={post:{type:"page",fields:{id:"string",stem:"string",extension:"string",meta:"json",path:"string",title:"string",description:"string",seo:"json",body:"json",navigation:"json",tags:"json",image:"string",date:"date"}},page:{type:"page",fields:{id:"string",stem:"string",extension:"string",meta:"json",path:"string",title:"string",description:"string",seo:"json",body:"json",navigation:"json",tags:"json",image:"string",date:"date"}},info:{type:"data",fields:{}}},b=(r,s)=>{const t=r._conditions;return t.length>0?`(${t.join(` ${s} `)})`:""},S=r=>{const s=[],t={_conditions:s,where(a,n,e){let i;switch(n.toUpperCase()){case"IN":case"NOT IN":if(Array.isArray(e)){const c=e.map(f=>$(f)).join(", ");i=`"${String(a)}" ${n.toUpperCase()} (${c})`}else throw new TypeError(`Value for ${n} must be an array`);break;case"BETWEEN":case"NOT BETWEEN":if(Array.isArray(e)&&e.length===2)i=`"${String(a)}" ${n.toUpperCase()} ${$(e[0])} AND ${$(e[1])}`;else throw new Error(`Value for ${n} must be an array with two elements`);break;case"IS NULL":case"IS NOT NULL":i=`"${String(a)}" ${n.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":i=`"${String(a)}" ${n.toUpperCase()} ${$(e)}`;break;default:i=`"${String(a)}" ${n} ${$(typeof e=="boolean"?Number(e):e)}`}return s.push(`${i}`),t},andWhere(a){const n=a(S());return s.push(b(n,"AND")),t},orWhere(a){const n=a(S());return s.push(b(n,"OR")),t}};return t},z=(r,s)=>{const t={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[],count:{field:"",distinct:!1}},a={__params:t,andWhere(e){const i=e(S());return t.conditions.push(b(i,"AND")),a},orWhere(e){const i=e(S());return t.conditions.push(b(i,"OR")),a},path(e){return a.where("path","=",U(e))},skip(e){return t.offset=e,a},where(e,i,c){return a.andWhere(f=>f.where(String(e),i,c)),a},limit(e){return t.limit=e,a},select(...e){return e.length&&t.selectedFields.push(...e),a},order(e,i){return t.orderBy.push(`"${String(e)}" ${i}`),a},async all(){return s(r,n()).then(e=>e||[])},async first(){return s(r,n({limit:1})).then(e=>e[0]||null)},async count(e="*",i=!1){return s(r,n({count:{field:String(e),distinct:i}})).then(c=>c[0].count)}};function n(e={}){let i="SELECT ";if(e!=null&&e.count)i+=`COUNT(${e.count.distinct?"DISTINCT ":""}${e.count.field}) as count`;else{const f=Array.from(new Set(t.selectedFields));i+=f.length>0?f.map(y=>`"${String(y)}"`).join(", "):"*"}i+=` FROM ${K[String(r)]}`,t.conditions.length>0&&(i+=` WHERE ${t.conditions.join(" AND ")}`),t.orderBy.length>0?i+=` ORDER BY ${t.orderBy.join(", ")}`:i+=" ORDER BY stem ASC";const c=(e==null?void 0:e.limit)||t.limit;return c>0&&(t.offset>0?i+=` LIMIT ${c} OFFSET ${t.offset}`:i+=` LIMIT ${c}`),i}return a};function $(r){return`'${String(r).replace(/'/g,"''")}'`}const T=/^h([1-6])$/,Y=r=>T.test(r);async function Z(r,s){const{ignoredTags:t=[]}={};return(await r.where("extension","=","md").select("path","body","description","title").all()).flatMap(n=>X(n,{ignoredTags:t}))}function X(r,{ignoredTags:s}){var f,y,_,o;const t=!r.body||((f=r.body)==null?void 0:f.type)==="root"?r.body:V(r.body),a=r.path??"",n=[{id:a,title:r.title||"",titles:[],content:(r.description||"").trim(),level:1}];if(!(t!=null&&t.children))return n;let e=1,i=0;const c=[r.title??""];for(const m of t.children){const D=m.tag||"";if(Y(D)){const d=Number(((y=D.match(T))==null?void 0:y[1])??0),v=E(m).trim();d===1?c.splice(0,c.length):d<i?c.splice(d-1,c.length-1):d===i&&c.pop(),n.push({id:`${a}#${(_=m.props)==null?void 0:_.id}`,title:v,titles:[...c],content:"",level:d}),c.push(v),i=d,e+=1}else{const d=E(m,s).trim();if(e===1&&((o=n[e-1])==null?void 0:o.content)===d)continue;n[e-1].content=`${n[e-1].content} ${d}`.trim()}}return n}function E(r,s=[]){var a;let t="";return r.type==="text"&&(t+=r.value||""),s.includes(r.tag??"")?"":((a=r.children)!=null&&a.length&&(t+=r.children.map(n=>E(n,s)).filter(Boolean).join("")),t)}const J=r=>{var t,a;const s=(a=(t=H())==null?void 0:t.ssrContext)==null?void 0:a.event;return z(r,(n,e)=>k(s,n,e))};function ie(r,s){return te(r,t=>Z(t))}async function k(r,s,t){return ee(s,t)}async function ee(r,s){return await F(()=>import("./CAg_4wFJ.js"),__vite__mapDeps([0,1]),import.meta.url).then(a=>a.loadDatabaseAdapter(r)).then(a=>a.all(s))}function te(r,s){const t=J(r),a={where(n,e,i){return t.where(String(n),e,i),a},andWhere(n){return t.andWhere(n),a},orWhere(n){return t.orWhere(n),a},order(n,e){return t.order(String(n),e),a},then(n,e){return s(t).then(n,e)},catch(n){return this.then(void 0,n)},finally(n){return this.then(void 0,void 0).finally(n)},get[Symbol.toStringTag](){return"Promise"}};return a}export{ie as a,se as b,ae as c,V as d,J as q,K as t,re as u};
